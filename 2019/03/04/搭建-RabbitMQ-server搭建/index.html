<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="CentOS RabbitMQ Server"><meta name="keywords" content="RabbitMQ"><meta name="author" content="anan,undefined"><meta name="copyright" content="anan"><title>CentOS RabbitMQ Server | Anan</title><link rel="shortcut icon" href="/img/my-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.5.6"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css?version=1.5.6"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><link rel="manifest" href="/manifest.json"><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#FF667B"><meta name="msapplication-TileColor" content="#FF667B"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#FF667B"><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-123397569-1', 'auto');
ga('send', 'pageview');</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#首先需要安装erlang"><span class="toc-number">1.</span> <span class="toc-text">首先需要安装erlang</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装RabbitMQ"><span class="toc-number">2.</span> <span class="toc-text">安装RabbitMQ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#出现问题"><span class="toc-number">2.1.</span> <span class="toc-text">出现问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#注意，这里出现config-file-s-etc-rabbitmq-rabbitmq-config-not-found"><span class="toc-number">2.1.1.</span> <span class="toc-text">注意，这里出现config file(s) : /etc/rabbitmq/rabbitmq.config (not found)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#编辑内容如下"><span class="toc-number">2.1.1.1.</span> <span class="toc-text">编辑内容如下</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#保存配置后重启服务"><span class="toc-number">2.1.1.2.</span> <span class="toc-text">保存配置后重启服务</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#开放-15672-端口"><span class="toc-number">3.</span> <span class="toc-text">开放 15672 端口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RabbitMQ无法访问Web管理页面"><span class="toc-number">4.</span> <span class="toc-text">RabbitMQ无法访问Web管理页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#设置-RabbitMQ-远程-IP-登陆-以下操作不需要重启"><span class="toc-number">5.</span> <span class="toc-text">设置 RabbitMQ 远程 IP 登陆 (以下操作不需要重启)</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://avatars2.githubusercontent.com/u/14139937?s=460&amp;v=4"></div><div class="author-info__name text-center">anan</div><div class="author-info__description text-center">BLACKPINK's Fans</div><div class="follow-button"><a href="https://github.com/Zakariyya">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">106</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">44</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">18</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" href="http://dblab.xmu.edu.cn/blog/category/big-data/">厦门大学数据库实验室</a><a class="author-info-links__name text-center" href="http://4dian.sinaapp.com/">四点网</a><a class="author-info-links__name text-center" href="https://www.itshouce.com.cn">IT手册</a><a class="author-info-links__name text-center" href="https://www.mangococo.cn">芒枸公社</a><a class="author-info-links__name text-center" href="http://www.jasongj.com/">郭俊 Jason</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/img/top.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Anan</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="post-info"><div id="post-title">CentOS RabbitMQ Server</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-03-04</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/搭建/">搭建</a><span class="post-meta__separator">|</span><i class="fa fa-comment-o post-meta__icon" aria-hidden="true"></i><a href="/2019/03/04/搭建-RabbitMQ-server搭建/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="2019/03/04/搭建-RabbitMQ-server搭建/"></span></a><div class="post-meta-wordcount"><span>Word count: </span><span class="word-count">850</span><span class="post-meta__separator">|</span><span>Reading time: 4 min</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h2 id="首先需要安装erlang"><a href="#首先需要安装erlang" class="headerlink" title="首先需要安装erlang"></a>首先需要安装erlang</h2><blockquote>
<p>参考：<a href="http://fedoraproject.org/wiki/EPEL/FAQ#howtouse" target="_blank" rel="noopener">http://fedoraproject.org/wiki/EPEL/FAQ#howtouse</a></p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh http://download.fedoraproject.org/pub/epel/7/x86_64/e/epel-release-7-8.noarch.rpm</span><br><span class="line">yum install erlang</span><br></pre></td></tr></table></figure>
<h2 id="安装RabbitMQ"><a href="#安装RabbitMQ" class="headerlink" title="安装RabbitMQ"></a>安装RabbitMQ</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget http://www.rabbitmq.com/releases/rabbitmq-server/v3.6.6/rabbitmq-server-3.6.6-1.el7.noarch.rpm</span><br><span class="line"></span><br><span class="line">yum install rabbitmq-server-3.6.6-1.el7.noarch.rpm </span><br><span class="line"></span><br><span class="line">service rabbitmq-server start</span><br><span class="line">service rabbitmq-server status</span><br></pre></td></tr></table></figure>
<h3 id="出现问题"><a href="#出现问题" class="headerlink" title="出现问题"></a>出现问题</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Redirecting to /bin/systemctl status rabbitmq-server.service</span><br><span class="line">● rabbitmq-server.service - RabbitMQ broker</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/rabbitmq-server.service; disabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since Mon 2019-03-04 15:21:52 CST; 6s ago</span><br><span class="line"> Main PID: 793 (beam.smp)</span><br><span class="line">   Status: <span class="string">"Initialized"</span></span><br><span class="line">   CGroup: /system.slice/rabbitmq-server.service</span><br><span class="line">           ├─ 793 /usr/lib64/erlang/erts-5.10.4/bin/beam.smp -W w -A 64 -P 1048576 -t 5000000 -stbt db -zdbbl 32000 -K <span class="literal">true</span> -- -root /usr/lib64/erlang ...</span><br><span class="line">           ├─ 929 /usr/lib64/erlang/erts-5.10.4/bin/epmd -daemon</span><br><span class="line">           ├─1061 inet_gethost 4</span><br><span class="line">           └─1062 inet_gethost 4</span><br><span class="line"></span><br><span class="line">Mar 04 15:21:48 anan rabbitmq-server[793]: RabbitMQ 3.6.6. Copyright (C) 2007-2016 Pivotal Software, Inc.</span><br><span class="line">Mar 04 15:21:48 anan rabbitmq-server[793]: <span class="comment">##  ##      Licensed under the MPL.  See http://www.rabbitmq.com/</span></span><br><span class="line">Mar 04 15:21:48 anan rabbitmq-server[793]: <span class="comment">##  ##</span></span><br><span class="line">Mar 04 15:21:48 anan rabbitmq-server[793]: <span class="comment">##########  Logs: /var/log/rabbitmq/rabbit@anan.log</span></span><br><span class="line">Mar 04 15:21:48 anan rabbitmq-server[793]: <span class="comment">######  ##        /var/log/rabbitmq/rabbit@anan-sasl.log</span></span><br><span class="line">Mar 04 15:21:48 anan rabbitmq-server[793]: <span class="comment">##########</span></span><br><span class="line">Mar 04 15:21:48 anan rabbitmq-server[793]: Starting broker...</span><br><span class="line">Mar 04 15:21:52 anan rabbitmq-server[793]: systemd unit <span class="keyword">for</span> activation check: <span class="string">"rabbitmq-server.service"</span></span><br><span class="line">Mar 04 15:21:52 anan systemd[1]: Started RabbitMQ broker.</span><br><span class="line">Mar 04 15:21:52 anan rabbitmq-server[793]: completed with 0 plugins.</span><br></pre></td></tr></table></figure>
<p>打开 <a href="mailto:/var/log/rabbitmq/rabbit@anan.log" target="_blank" rel="noopener">/var/log/rabbitmq/rabbit@anan.log</a><br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@anan rabbitmq]<span class="comment"># cat rabbit\@anan.log</span></span><br><span class="line"></span><br><span class="line">=INFO REPORT==== 4-Mar-2019::15:21:48 ===</span><br><span class="line">Starting RabbitMQ 3.6.6 on Erlang R16B03-1</span><br><span class="line">Copyright (C) 2007-2016 Pivotal Software, Inc.</span><br><span class="line">Licensed under the MPL.  See http://www.rabbitmq.com/</span><br><span class="line"></span><br><span class="line">=INFO REPORT==== 4-Mar-2019::15:21:48 ===</span><br><span class="line">node           : rabbit@anan</span><br><span class="line">home dir       : /var/lib/rabbitmq</span><br><span class="line">config file(s) : /etc/rabbitmq/rabbitmq.config (not found)</span><br><span class="line">cookie <span class="built_in">hash</span>    : 9csyWc/ryZpumbtCpBTFYg==</span><br><span class="line"><span class="built_in">log</span>            : /var/<span class="built_in">log</span>/rabbitmq/rabbit@anan.log</span><br><span class="line">sasl <span class="built_in">log</span>       : /var/<span class="built_in">log</span>/rabbitmq/rabbit@anan-sasl.log</span><br><span class="line">database dir   : /var/lib/rabbitmq/mnesia/rabbit@anan</span><br></pre></td></tr></table></figure></p>
<h4 id="注意，这里出现config-file-s-etc-rabbitmq-rabbitmq-config-not-found"><a href="#注意，这里出现config-file-s-etc-rabbitmq-rabbitmq-config-not-found" class="headerlink" title="注意，这里出现config file(s) : /etc/rabbitmq/rabbitmq.config (not found)"></a>注意，这里出现<strong>config file(s) : /etc/rabbitmq/rabbitmq.config (not found)</strong></h4><blockquote>
<p>这里显示的是没有找到配置文件，我们可以自己创建这个文件</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/rabbitmq/</span><br><span class="line">vi rabbitmq.config</span><br></pre></td></tr></table></figure>
<h5 id="编辑内容如下"><a href="#编辑内容如下" class="headerlink" title="编辑内容如下"></a>编辑内容如下</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#123;rabbit, [&#123;loopback_users, []&#125;]&#125;].</span><br></pre></td></tr></table></figure>
<blockquote>
<p>后面的“.”是要的，不是写错<br>这里的意思是开放使用，rabbitmq默认创建的用户guest，密码也是guest，这个用户默认只能是本机访问，localhost或者127.0.0.1，从外部访问需要添加上面的配置。</p>
</blockquote>
<h5 id="保存配置后重启服务"><a href="#保存配置后重启服务" class="headerlink" title="保存配置后重启服务"></a>保存配置后重启服务</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service rabbitmq-server stop</span><br><span class="line">service rabbitmq-server start</span><br></pre></td></tr></table></figure>
<h2 id="开放-15672-端口"><a href="#开放-15672-端口" class="headerlink" title="开放 15672 端口"></a>开放 15672 端口</h2><blockquote>
<p>这里虚拟机操作，没有机子没装防火墙，固做记录未亲测</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=15672/tcp --permanent</span><br><span class="line">firewall-cmd --reload </span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接关闭防火墙</span></span><br><span class="line">service iptables stop</span><br></pre></td></tr></table></figure>
<h2 id="RabbitMQ无法访问Web管理页面"><a href="#RabbitMQ无法访问Web管理页面" class="headerlink" title="RabbitMQ无法访问Web管理页面"></a>RabbitMQ无法访问Web管理页面</h2><blockquote>
<p>启动RabbitMQ后，没法访问Web管理页面，RabbitMQ安装后默认是不启动管理模块的，所以需要配置将管理模块启动 </p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl start_app</span><br><span class="line">rabbitmq-plugins <span class="built_in">enable</span> rabbitmq_management</span><br><span class="line">rabbitmqctl stop</span><br></pre></td></tr></table></figure>
<h2 id="设置-RabbitMQ-远程-IP-登陆-以下操作不需要重启"><a href="#设置-RabbitMQ-远程-IP-登陆-以下操作不需要重启" class="headerlink" title="设置 RabbitMQ 远程 IP 登陆 (以下操作不需要重启)"></a>设置 RabbitMQ 远程 IP 登陆 (以下操作不需要重启)</h2><blockquote>
<p>rabbitmq默认创建的用户guest，密码也是guest</p>
</blockquote>
<ol>
<li><p>创建一个 anan 的账号</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl add_user anan 123456</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置用户角色</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl set_user_tags anan  administrator</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置用户权限</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl set_permissions -p <span class="string">"/"</span> anan <span class="string">".*"</span> <span class="string">".*"</span> <span class="string">".*"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>设置完成后可以查看当前用户和角色（需要开启服务）</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl list_users</span><br></pre></td></tr></table></figure>
</li>
</ol>
<blockquote>
<p>访问： <a href="http://ip:15672" target="_blank" rel="noopener">http://ip:15672</a></p>
</blockquote>
<hr>
<ul>
<li><a href="https://www.cnblogs.com/uptothesky/p/6094357.html" target="_blank" rel="noopener">在CentOS7上安装RabbitMQ</a></li>
<li><a href="https://fedoraproject.org/wiki/EPEL/FAQ#howtouse" target="_blank" rel="noopener">How can I install the packages from the EPEL software repository?</a></li>
<li><a href="https://blog.csdn.net/qq_35873847/article/details/78721696" target="_blank" rel="noopener">RabbitMQ无法访问Web管理页面</a></li>
</ul>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">anan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://zakariyya.github.io/2019/03/04/搭建-RabbitMQ-server搭建/">https://zakariyya.github.io/2019/03/04/搭建-RabbitMQ-server搭建/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/RabbitMQ/">RabbitMQ</a></div><div class="social-share"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script><nav id="pagination"><div class="prev-post pull-left"><a href="/2019/03/12/搭建-翻墙-v2ray搭建启动/"><i class="fa fa-chevron-left">  </i><span>v2ray搭建启动</span></a></div><div class="next-post pull-right"><a href="/2019/03/01/科普-常见版本号/"><span>常见版本号</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'https://zakariyya.github.io/2019/03/04/搭建-RabbitMQ-server搭建/';
  this.page.identifier = '2019/03/04/搭建-RabbitMQ-server搭建/';
  this.page.title = 'CentOS RabbitMQ Server';
}
var d = document, s = d.createElement('script');
s.src = "https://" + 'H2O2' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script><script id="dsq-count-scr" src="https://H2O2.disqus.com/count.js" async></script></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2015 - 2019 By anan</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.6"></script><script src="/js/fancybox.js?version=1.5.6"></script><script src="/js/sidebar.js?version=1.5.6"></script><script src="/js/copy.js?version=1.5.6"></script><script src="/js/fireworks.js?version=1.5.6"></script><script src="/js/transition.js?version=1.5.6"></script><script src="/js/scroll.js?version=1.5.6"></script><script src="/js/head.js?version=1.5.6"></script></body></html>